{% extends 'base.html' %}

{% block content %}
<!-- Cart Page -->
<div class="small-container cart-page">
    <h2 class="title">Your Cart</h2>

    <!-- Cart Table -->
    <table class="cart-table">
        <tr>
            <th>Product</th>
            <th>Quantity</th>
            <th>Subtotal</th>
        </tr>

        {% if cart_items %}
            {% for item in cart_items %}
                <tr>
                    <td>
                        <div class="cart-info">
                            <!-- Product Image and Name Link to Product Details -->
                            <a href="{{ url_for('product_details', product_id=item['product_id']) }}">
                                <img src="{{ url_for('static', filename='uploads/products/' + item['product_image']) }}" alt="{{ item['product_name'] }}">
                            </a>
                            <div>
                                <a href="{{ url_for('product_details', product_id=item['product_id']) }}">
                                    <p>{{ item['product_name'] }}</p>
                                </a>
                                <small>Price: ${{ item['product_price'] }}</small>
                                <form action="{{ url_for('remove_from_cart', cart_id=item['cart_id']) }}" method="POST" style="display:inline;">
                                    <button type="submit" class="remove-btn">Remove</button>
                                </form>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" value="1" min="1" readonly>
                    </td>
                    <td>${{ item['product_price'] }}</td>
                </tr>
            {% endfor %}
        {% else %}
            <tr>
                <td colspan="3" class="empty-cart-message">Your cart is empty. <a href="{{ url_for('products') }}">Browse products</a> to add some!</td>
            </tr>
        {% endif %}
    </table>

    <!-- Total Price Section -->
    {% if cart_items %}
        <div class="total-price">
            <table>
                <tr>
                    <td>Total</td>
                    <td>${{ total }}</td>
                </tr>
            </table>
            <a href="#" class="btn checkout-btn">Proceed to Checkout</a>
        </div>
    {% endif %}
</div>

{% endblock %}
